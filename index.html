<!DOCTYPE html>
<html>

<head>
    <base target="_top">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
        integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <?!= HtmlService.createHtmlOutputFromFile('css').getContent(); ?>
</head>

<body>
    <?!= HtmlService.createHtmlOutputFromFile('PopUp').getContent(); ?>
    <?!= HtmlService.createHtmlOutputFromFile('util').getContent(); ?>
    <?!= HtmlService.createHtmlOutputFromFile('script').getContent(); ?>
    <div id="viewer" class="overflow-auto">
        <div id="cart" class="position-fixed top-0 end-0">
            <div id="cartHandle" class="cart-handle">
                <i class="fa-solid fa-cart-shopping"></i>
            </div>
            <div id="cartItems">
                <!-- selected items will be populated here via JavaScript -->
            </div>
            <div id="cartSummary" class="p-3 bg-light border rounded">
                <h5 id="cartTotal" style="text-align: right;">총 금액: <!--formatted total amount will go here--></h5>
                <button id="cartCheckout" class="btn btn-primary" onclick="handleCheckoutClick()">결제</button>
                <!-- Hidden summary cart layout -->
            </div>
        </div>
        <div id="header" class="position-fixed top-0 start-0">
            <span id="userInfo" style="height:2vh;" class="badge text-bg-dark" onclick="showPopUp()">username</span>
            <div class="progress" style="height:2vh;">
                <div id="progressing" class="progress-bar" role="progressbar" style="width: 1%;" aria-valuenow="1"
                    aria-valuemin="0">1</div>
            </div>
        </div>
        <div id="product-list">
        </div>
        <!-- pages will be populated here via JavaScript -->
        <?!= HtmlService.createHtmlOutputFromFile('Search').getContent(); ?>
        <div class="list-group d-flex align-items-end" id="productList">
            <!-- Products will be inserted here by JavaScript -->
        </div>
    </div>
    <script>
        document.getElementById('cartHandle').addEventListener('click', function () {
            document.getElementById('cart').classList.toggle('shrink');
        });
        function showPopUp() {
            var popup = document.getElementById("confirm");
            popup.classList.add("visible");
            var cookiePhoneValue = getCookie("phone");
            var phoneInput = document.getElementById("popup-phone");
            phoneInput.value = cookiePhoneValue;
        }
    </script>
    <?!= HtmlService.createHtmlOutputFromFile('MakeOrder').getContent(); ?>
</body>

</html>